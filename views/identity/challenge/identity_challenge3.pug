extends ../../module_layout

block content

  .ui.container#raised-container.short-page-margin2
    .ui.raised.segment
      #raised-content
        .limit
          #module-steps(style="max-width:100%;max-height:100%;text-align:center;")
            //- .row#steps-icons  
            //-   img(src='/images/quiz-icon.png')
            //-   img(src='/images/learn-icon.png')
            //-   img(src='/images/explore-icon.png')
            //-   img(src='/images/quiz-icon.png')
            //-   img(src='/images/reflect-icon.png')
            .progress-wrapper
              .progress-item
                .step-counter
                  svg(xmlns='http://www.w3.org/2000/svg' fill='currentcolor' height='48' viewbox='0 -960 960 960' width='48')#challenge-icon
                    path(d='M543-340q16.595 0 28.798-12.202Q584-364.405 584-381t-12.202-28.798Q559.595-422 543-422t-28.798 12.202Q502-397.595 502-381t12.202 28.798Q526.405-340 543-340Zm-25-126h47q2-29 8.5-43t32.5-39q27-26 37.5-45.395Q654-612.79 654-639q0-45.882-31.5-74.941Q591-743 540-743q-38 0-68 20.5T428-665l45 19q11-25 27.5-38t39.5-13q29.778 0 48.389 17Q607-663 607-637q0 20-9 35t-32 32q-32 29-40 46.5t-8 57.5ZM260-200q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h560q24 0 42 18t18 42v560q0 24-18 42t-42 18H260Zm0-60h560v-560H260v560ZM140-80q-24 0-42-18t-18-42v-620h60v620h620v60H140Zm120-740v560-560Z')
                //- i.bordered.inverted.user.secret.icon#challenge
                .step-name Challenge
              .progress-item
                .step-counter
                  svg(xmlns='http://www.w3.org/2000/svg' fill='currentcolor' height='48' viewbox='0 -960 960 960' width='48')#learn-icon
                    path(d='M480-60q-78-69-170.5-106T120-203v-429q94 0 186.5 43T480-469q81-77 173.5-120T840-632v429q-97 0-189.5 37T480-60Zm0-77q71-51 146.5-81.5T780-257v-310q-68 11-143.5 54.5T480-392q-88-81-160-123t-140-52v310q78 8 153.5 38.5T480-137Zm3-475q-65 0-109.5-44.5T329-766q0-65 44.5-109.5T483-920q65 0 109.5 44.5T637-766q0 65-44.5 109.5T483-612Zm.159-60Q522-672 549.5-699.659q27.5-27.66 27.5-66.5Q577-805 549.341-832.5q-27.66-27.5-66.5-27.5Q444-860 416.5-832.341q-27.5 27.66-27.5 66.5Q389-727 416.659-699.5q27.66 27.5 66.5 27.5ZM482-768Zm-2 416Z')
                //- i.bordered.inverted.book.open.icon#learn
                .step-name Learn
              .progress-item
                .step-counter
                  svg(xmlns='http://www.w3.org/2000/svg' fill='currentcolor' height='48' viewbox='0 -960 960 960' width='48')#explore-icon
                    path(d='m263-263 290-143 143-290-290 143-143 290Zm217-177q-17 0-28.5-11.5T440-480q0-17 11.5-28.5T480-520q17 0 28.5 11.5T520-480q0 17-11.5 28.5T480-440Zm0 360q-82 0-155-31.5t-127.5-86Q143-252 111.5-325T80-480q0-83 31.5-156t86-127Q252-817 325-848.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 82-31.5 155T763-197.5q-54 54.5-127 86T480-80Zm0-60q142 0 241-99.5T820-480q0-142-99-241t-241-99q-141 0-240.5 99T140-480q0 141 99.5 240.5T480-140Zm0-340Z')
                //- i.bordered.inverted.compass.icon#explore
                .step-name Explore
              .progress-item
                .step-counter
                  svg(xmlns='http://www.w3.org/2000/svg' fill='currentcolor' height='48' viewbox='0 -960 960 960' width='48')#evaluate-icon
                    path(d='M543-340q16.595 0 28.798-12.202Q584-364.405 584-381t-12.202-28.798Q559.595-422 543-422t-28.798 12.202Q502-397.595 502-381t12.202 28.798Q526.405-340 543-340Zm-25-126h47q2-29 8.5-43t32.5-39q27-26 37.5-45.395Q654-612.79 654-639q0-45.882-31.5-74.941Q591-743 540-743q-38 0-68 20.5T428-665l45 19q11-25 27.5-38t39.5-13q29.778 0 48.389 17Q607-663 607-637q0 20-9 35t-32 32q-32 29-40 46.5t-8 57.5ZM260-200q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h560q24 0 42 18t18 42v560q0 24-18 42t-42 18H260Zm0-60h560v-560H260v560ZM140-80q-24 0-42-18t-18-42v-620h60v620h620v60H140Zm120-740v560-560Z')
                //- i.bordered.inverted.edit.icon#evaluate
                .step-name Evaluate
              .progress-item
                .step-counter
                  svg(xmlns='http://www.w3.org/2000/svg' fill='currentcolor' height='48' viewbox='0 -960 960 960' width='48')#reflect-icon
                    path(d='M480-80q-27 0-47.5-13T406-129h-14q-24 0-42-18t-18-42v-143q-66-43-104-110t-38-148q0-121 84.5-205.5T480-880q121 0 205.5 84.5T770-590q0 81-38 148T628-332v143q0 24-18 42t-42 18h-14q-6 23-26.5 36T480-80Zm-88-109h176v-44H392v44Zm0-84h176v-40H392v40Zm-9-100h74v-137l-92-92 31-31 84 84 84-84 31 31-92 92v137h74q60-28 96.5-87T710-590q0-97-66.5-163.5T480-820q-97 0-163.5 66.5T250-590q0 71 36.5 130t96.5 87Zm97-176Zm0-48Z')
                //- i.bordered.inverted.lightbulb.icon#reflect
                .step-name Reflect
          h1.ui.header(style="margin:0 auto; text-align: center;margin-top:35px;")
            .content#great-job
                | Great Job!
          //- p Thank you for taking the time to complete this pre-quiz. Your feedback is invaluable and will help us to ensure that everyone is adequately prepared for the upcoming lesson. 
          //- .ui.one.column.centered.grid(style="margin: 50px")
          //-   .ui.large.right.pointing.circular.label(style="display: flex; align-items: center; float: left;width:50%;")
          //-     p(style="padding: 0px; text-align: center; margin: 0;") The results of the pre-quiz will be presented along with the post-quiz results at the end of the lesson.
          //-       br
          //-       br
          //-       | You will be able to see your own 
          //-       br
          //-       | progress and achievement!
          //-   img#dart_image1.ui.small.image.right.floated(src='/profile_pictures/transparent.png' style="float: right")
          .ui.grid#badgesGrid(style="margin:0 auto; text-align: center;")
            .one.column.row
              .column
                .content
                  img#earned_badge(onmouseenter="animateBadge()" src='/badges/identity/challenge_conqueror.png')
                  p <strong>Energized</strong>
                    br
                    | <strong>Evaluation</strong>

          #text
            p You've completed the Challenge and earned your very first Badge!  But that's not allâ€”there are still five more badges for you to earn. Keep up the great work as we head into Learn!      
          //- +navButtons('/challenge2/identity', '/submod/learn/identity', 'Back', 'Learn')  
          //-       <iframe id="audio-frame" allow="autoplay"  src="../../sound/progress.mp3" frameborder="0" style="display:none"></iframe>
          //- <iframe id="audio-frame2" src="../../sound/unlock.wav" frameborder="0" style="display:none"></iframe>
          <iframe id="audio-frame" allow="autoplay"  src="../../sound/progress.mp3" frameborder="0" style="display:none"></iframe>

    script.
        var progress = #{user.moduleProgress.identity.percent}
    script(src='/js/setProgressBar.js')  

block append footer
  .ui.container
    +navButtons('/challenge2/identity', '/submod/learn/identity', 'Back', 'Learn')  


    




block scripts


  //- script.
  //-   document.addEventListener('DOMContentLoaded', function() {
  //-     const dartieImg = document.getElementById('dart_image1');
  //-     const character = localStorage.getItem('character');

  //-     if (character) {
  //-       dartieImg.src = "/profile_pictures/" + character;
  //-     }
  //-   }
  //-   );
  script.
    function playAudio() {
      var iframe = document.getElementById('audio-frame');
      var audioElement = iframe.contentWindow.document.querySelector('audio');
      audioElement.play();
      console.log("progress audio played")
    }

    //- function playAudio2() {
    //-   var iframe = document.getElementById('audio-frame2');
    //-   var audioElement = iframe.contentWindow.document.querySelector('audio');
    //-   audioElement.play();
    //-   console.log("badge unlock audio played")
    //- }

    function animateBadge() {
      $('#earned_badge')
        .transition('jiggle in')
      ;
    }
    

    //- trumpets.addEventListener('load', function() {
    //-   trumpets.contentWindow.document.querySelector('audio').play();
    //- });

    //- let sound = new Audio('../../videos/trumpets.mp3');
    //- sound.play();

    let progressItems = document.getElementsByClassName('progress-item');
    //- for (var i = 0; i < progressItems.length; i++) {
    //-   console.log(i);
    //-   console.log(progressItems[i]);
    //- }

    $('#challenge-icon')
      .transition({
        animation: 'flash',
        duration: '0.5s',
      })
    ;

    // Show progress after 1 second
    setTimeout(function() {
      //- make challenge icon blue
      let challengeIcon = document.getElementById('challenge-icon');
      challengeIcon.style.fill = "#6BBCC7";
    }, 600);

          

    setTimeout(function() {
      let progressItems = document.getElementsByClassName('progress-item');

      //- make line after challenge blue
      if (progressItems[0]) {
        progressItems[0].classList.add('completed');
        console.log("completed class added");
      }
    }, 2000);

    setTimeout(function() {
      $('#great-job')
        .transition({
          animation: 'scale in',
          duration: '0.5s',
        })
      ;
    }, 3000);
    
    setTimeout(function() {
      // Create the iframe element
      var iframe = document.createElement('iframe');

      // Set the attributes
      iframe.id = 'audio-frame2';
      iframe.src = '../../sound/unlock.wav';
      iframe.frameBorder = '0';
      iframe.style.display = 'none';

      // Append the iframe to the document body or any other desired container
      document.body.appendChild(iframe);

      var audio = new Audio('../../sound/unlock.wav');
      audio.play();
      $('#badgesGrid')
        .transition({
          animation: 'tada in',
          duration: '1s',
        })
      ;
    }, 4500);

    setTimeout(function() {
      $('#text')
        .transition({
          animation: 'fade in',
          duration: '1s',
        })
      ;
    }, 6000);

    localStorage.setItem('progress', 5);
    localStorage.setItem('theft-path', "/challenge3/identity");
  script(src='/js/progress.js' percent=10 link="/challenge3/identity")  


block styles
  link(rel='stylesheet', href='/css/evaluate.css')  
  link(rel='stylesheet', href='/css/progress.css')   

